# Nginx配置文件示例
# 保存位置：/etc/nginx/sites-available/teacherlab

# ============================================
# 方案1：使用路径访问（推荐，无需多个域名）
# ============================================
server {
    listen 80;
    server_name _;  # 使用IP访问，或替换为你的域名
    
    root /var/www/teacherlab;
    index index.html;
    
    # 主站 - 教师实验室
    location = / {
        alias /var/www/teacherlab/teacherelab/index.html;
    }
    
    location /lab {
        alias /var/www/teacherlab/teacherelab;
        try_files $uri $uri/ =404;
        index index.html;
    }
    
    # 背诵管理（旧版HTML）
    location /recitation {
        alias /var/www/teacherlab/背诵管理;
        try_files $uri $uri/ =404;
        index index.html;
    }
    
    # 背诵管理统计系统（Vue3构建版）
    location /recitation-vue {
        alias /var/www/teacherlab/背诵管理统计系统/dist;
        try_files $uri $uri/ /recitation-vue/index.html;
        index index.html;
    }
    
    # PDF习题转PPT（React构建版）
    location /ppt {
        alias /var/www/teacherlab/习题转ppt/teacher-ppt-splitter2/dist;
        try_files $uri $uri/ /ppt/index.html;
        index index.html;
    }
    
    # 错题统计
    location /mistakes {
        alias /var/www/teacherlab/错题统计;
        try_files $uri $uri/ =404;
        index index.html;
    }
    
    # 静态资源缓存
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|eot)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
        access_log off;
    }
    
    # 禁止访问隐藏文件
    location ~ /\. {
        deny all;
        access_log off;
        log_not_found off;
    }
}

# ============================================
# 方案2：使用子域名访问（需要多个域名）
# ============================================
# 教师实验室主站
# server {
#     listen 80;
#     server_name teacherlab.com www.teacherlab.com;
#     
#     root /var/www/teacherlab/teacherelab;
#     index index.html;
#     
#     location / {
#         try_files $uri $uri/ =404;
#     }
# }
# 
# # 背诵管理统计系统
# server {
#     listen 80;
#     server_name recitation.teacherlab.com;
#     
#     root /var/www/teacherlab/背诵管理统计系统/dist;
#     index index.html;
#     
#     location / {
#         try_files $uri $uri/ /index.html;
#     }
# }
# 
# # PDF转PPT
# server {
#     listen 80;
#     server_name ppt.teacherlab.com;
#     
#     root /var/www/teacherlab/习题转ppt/teacher-ppt-splitter2/dist;
#     index index.html;
#     
#     location / {
#         try_files $uri $uri/ /index.html;
#     }
# }
# 
# # 错题统计
# server {
#     listen 80;
#     server_name mistakes.teacherlab.com;
#     
#     root /var/www/teacherlab/错题统计;
#     index index.html;
#     
#     location / {
#         try_files $uri $uri/ =404;
#     }
# }



